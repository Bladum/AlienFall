# BIS Repository Best Practices Structure

**Target Audience:** AI Agents, Developers, Business Analysts, Architects  
**Scope:** Comprehensive best practices across SQL, Python, Business Analysis, and Architecture domains  
**Apply to:** All relevant files in BIS repository (`engine/src/**`, `engine/cfg/**`, `wiki/**`)

---

## 📋 Comprehensive Table of Contents
- [🎯 Core Principles](#-core-principles)
- [🏗️ Design Patterns](#️-design-patterns)
- [📚 Key Terms](#-key-terms)
- [🔗 Industry References](#-industry-references)
- [📂 Practice Categories](#-practice-categories)
  - [SQL Best Practices](#sql-best-practices)
  - [Python Best Practices](#python-best-practices)
  - [Business Analysis Best Practices](#business-analysis-best-practices)
  - [Architecture Best Practices](#architecture-best-practices)

---

## 🎯 Core Principles
[Extract and consolidate foundational principles from each domain's existing content]

- **SQL Domain**: Schema-first design, performance optimization, data integrity
- **Python Domain**: Layered architecture, SOLID principles, security-first approach
- **Business Analysis Domain**: Business-first architecture, requirements traceability, stakeholder alignment
- **Architecture Domain**: Service-oriented design, scalability, maintainability

---

## 🏗️ Design Patterns

### Anti-patterns
[Map existing anti-pattern content from each domain]

### Use Cases
[Extract practical use cases from current hierarchical content]

### Guidance
[Convert existing guidance into template format]

---

## 📚 Key Terms
[Extract and define key terminology from each domain's content]

- **SQL**: CTE, Normalization, Indexing, Idempotence
- **Python**: Pathlib, Dual Logger, Dependency Injection, Type Hints
- **Business Analysis**: RACI Matrix, Value Proposition, Stakeholder Analysis
- **Architecture**: Service Model, Data Flow, Observability Map

---

## 🔗 Industry References

[Add industry standards and references currently missing]

- **SQL**: SQL Standards (ANSI/ISO), DuckDB Documentation, Data Warehousing Best Practices
- **Python**: PEP 8, SOLID Principles, OWASP Security Guidelines
- **Business Analysis**: BABOK Guide, Agile Requirements, ITIL Framework
- **Architecture**: TOGAF, ITIL Service Management, Microservices Patterns

### Benchmarks
[Add performance and quality benchmarks]

- **SQL**: Query Performance Benchmarks, Data Quality Metrics
- **Python**: Code Coverage Targets, Performance Benchmarks
- **Business Analysis**: Requirements Completeness Metrics, Stakeholder Satisfaction Scores
- **Architecture**: System Availability SLAs, Scalability Benchmarks

---

## 📂 Practice Categories

### SQL Best Practices
[Restructure existing SQL content into template format]

#### Schema Design & Optimization
**Priority:** 🔴 Must  
**Description:** [Detailed description of schema design principles]

**✅ Correct Implementation:**
- [Step-by-step correct approaches from existing content]

**❌ Wrong Implementation:**
- [Common mistakes from existing content]

#### Query Performance & Optimization
**Priority:** 🔴 Must  
**Description:** [Performance optimization guidance]

**✅ Correct Implementation:**
- [Performance best practices]

**❌ Wrong Implementation:**
- [Performance anti-patterns]

[Continue mapping all existing SQL categories to this format]

### Python Best Practices
[Similar restructuring for Python content]

#### Code Structure & Architecture
**Priority:** 🔴 Must  
**Description:** [Architecture principles]

**✅ Correct Implementation:**
- [Layered architecture implementation]

**❌ Wrong Implementation:**
- [Architecture violations]

#### Security & Best Practices
**Priority:** 🔴 Must  
**Description:** [Security implementation]

**✅ Correct Implementation:**
- [Security best practices]

**❌ Wrong Implementation:**
- [Security vulnerabilities]

[Map remaining Python categories]

### Business Analysis Best Practices
[Restructure BA content]

#### Requirements Management
**Priority:** 🔴 Must  
**Description:** [Requirements handling]

**✅ Correct Implementation:**
- [Requirements best practices]

**❌ Wrong Implementation:**
- [Requirements mistakes]

#### Stakeholder Management
**Priority:** 🟡 Should  
**Description:** [Stakeholder engagement]

**✅ Correct Implementation:**
- [Stakeholder best practices]

**❌ Wrong Implementation:**
- [Stakeholder management errors]

[Map remaining BA categories]

### Architecture Best Practices
[Restructure architecture content]

#### System Design
**Priority:** 🔴 Must  
**Description:** [System architecture principles]

**✅ Correct Implementation:**
- [Design best practices]

**❌ Wrong Implementation:**
- [Design anti-patterns]

#### Data Architecture
**Priority:** 🔴 Must  
**Description:** [Data modeling and flow]

**✅ Correct Implementation:**
- [Data architecture best practices]

**❌ Wrong Implementation:**
- [Data architecture mistakes]

[Map remaining architecture categories]

---

## ✅ Quick Validation Checklist
[Consolidate existing checklists from each domain]

## 🎯 Final Note for AI Agents
[Preserve existing AI agent guidance, enhanced with template compliance]


# BIS Repository Best Practices

## SQL Best Practices
- 🎯 Agent Mission & Usage Guide
  - Purpose
    - Define scope and objectives
    - Establish success criteria
    - Identify key stakeholders
  - How AI Agents Should Use This Guide
    - Decision-making framework
    - Context-aware application
    - Priority assessment
  - Decision-Making Framework
    - Risk evaluation
    - Impact analysis
    - Resource considerations
- 🏗️ Modeling & Design
  - Schema-first design blocks
    - Entity identification
    - Relationship mapping
    - Constraint definition
  - Design principles
    - Normalization rules
    - Performance considerations
    - Scalability patterns
  - Design artifacts & deliverables
    - ER diagrams
    - Data dictionaries
    - Schema documentation
  - Advanced analytics: preventive, predictive & SLA
    - Trend analysis
    - Forecasting models
    - Service level agreements
  - Columnar storage: patterns & anti-patterns
    - Optimal use cases
    - Performance benefits
    - Common pitfalls
  - Mermaid diagrams
    - Syntax guidelines
    - Best practices
    - Integration patterns
- 🔧 Build & Materialization
  - CTE layering & naming
    - Hierarchical structure
    - Naming conventions
    - Readability standards
  - Macros & reusable code
    - Parameterization
    - Error handling
    - Documentation requirements
  - Idempotence & refresh policies
    - State management
    - Incremental updates
    - Failure recovery
  - Pivoting, categorization, grouping & metrics
    - Aggregation strategies
    - Performance optimization
    - Result validation
  - Production templates
    - Standardized formats
    - Configuration management
    - Version control
- ⚡ Performance & Optimization
  - Priority strategies
    - Query optimization
    - Indexing strategies
    - Execution planning
  - DuckDB specifics
    - Memory management
    - Parallel processing
    - Storage optimization
  - Examples ✅❌
    - DuckDB examples ✅❌
      - Best practices
      - Common mistakes
      - Performance benchmarks
- 🔍 Review & Analysis
  - Analysis workflow
    - Data collection
    - Processing steps
    - Validation procedures
  - Outputs
    - Report generation
    - Visualization creation
    - Summary statistics
  - Analyzer (internal dev report)
    - Code quality metrics
    - Performance indicators
    - Compliance checks
  - Report spec (customer-facing)
    - Formatting standards
    - Content requirements
    - Delivery schedules
  - Data quality & testing
    - Validation rules
    - Error detection
    - Quality metrics
  - Governance & review
    - Approval workflows
    - Change management
    - Audit trails
- 📈 Data Visualization & Report Structure
  - Chart types
  - Layout principles
  - Accessibility standards
- 📎 Appendix
  - ✅ Quick Validation Checklist
    - Pre-deployment checks
    - Performance validation
    - Security assessment
  - 🔌 Addenda: DuckDB analytics utilities
    - Custom functions
    - Extension libraries
    - Integration tools
  - 📦 Practical templates & skeletons
    - Query templates
    - Report structures
    - Configuration files
- 🎨 Style & Formatting
  - Header block
    - Standard headers
    - Metadata inclusion
    - Version tracking
  - Identifiers
    - Naming conventions
    - Case sensitivity
    - Reserved words
  - Whitespace & layout
    - Indentation rules
    - Line breaks
    - Comment placement
  - Lists & commas
    - Delimiter usage
    - Formatting consistency
    - Readability standards
  - CTE spacing
    - Vertical alignment
    - Grouping logic
    - Comment integration
  - Examples ✅❌
    - Good examples
    - Bad examples
    - Improvement suggestions
- 🛠️ Development Workflow
  - Setting Up Development Environment
    - Tool installation
    - Configuration setup
    - Testing environment
  - Pre-commit Validation
    - Code quality checks
    - Security scanning
    - Performance testing
  - AI Agent Enforcement Examples
    - Automated validation
    - Rule enforcement
    - Feedback generation
- 🎯 Practice Priority Matrix
  - Critical practices
  - Recommended practices
  - Optional enhancements
- 🔍 Troubleshooting Common Issues
  - Error identification
  - Resolution strategies
  - Prevention measures
- 🎯 Final Note for AI Agents
  - Usage guidelines
  - Best practices
  - Continuous improvement

## Python Best Practices
- 🎯 Agent Mission & Usage Guide
  - Purpose
    - Define scope and objectives
    - Establish success criteria
    - Identify key stakeholders
  - How AI Agents Should Use This Guide
    - Decision-making framework
    - Context-aware application
    - Priority assessment
  - Decision-Making Framework
    - Risk evaluation
    - Impact analysis
    - Resource considerations
- 🏗️ Core Principles & Architecture
  - Layered Architecture (MANDATORY)
    - Separation of concerns
    - Dependency management
    - Interface design
  - Core Design Principles (MANDATORY)
    - SOLID principles
    - DRY principle
    - KISS principle
- ⚙️ AI Agent Adaptation Guide
  - 🎯 Agent Decision Framework
    - Context analysis
    - Rule evaluation
    - Action prioritization
  - 🔄 Rewrite vs Incremental Rules
    - When to refactor
    - Gradual improvement
    - Risk assessment
  - 🎨 Practice Categorization for Agents
    - Mandatory practices
    - Contextual practices
    - Enhancement practices
  - 📊 Enforcement Actions & Logging
    - Automated validation
    - Feedback generation
    - Compliance tracking
  - 🔧 Context-Aware Practice Selection
    - Project-specific adaptation
    - Team capability assessment
    - Business requirement alignment
- 🧩 Python Code Structure
  - Early Returns & Validation (CONTEXTUAL)
    - Input validation patterns
    - Error handling strategies
    - Performance implications
  - Avoid Mutable Defaults (MANDATORY)
    - Common pitfalls
    - Alternative approaches
    - Testing considerations
  - Pure Functions & Dependency Injection (ENHANCEMENT)
    - Function design principles
    - Testing benefits
    - Maintainability improvements
  - Line Length & Formatting (CONTEXTUAL)
    - PEP 8 compliance
    - Readability standards
    - Tool integration
- 📁 Path Handling & File Operations
  - Use Pathlib (MANDATORY)
    - Cross-platform compatibility
    - Method advantages
    - Migration strategies
  - Sibling File Operations (CONTEXTUAL)
    - Relative path handling
    - Directory traversal
    - Error management
  - Atomic File Operations (MANDATORY)
    - Data integrity
    - Failure recovery
    - Performance considerations
  - OS-Specific Operations (CONTEXTUAL)
    - Platform detection
    - Conditional logic
    - Testing approaches
- 🖥️ PySide/Qt UI Best Practices
  - Non-Blocking UI (MANDATORY)
    - Thread management
    - User experience
    - Performance optimization
  - Dual Logger Pattern (MANDATORY)
    - Implementation details
    - Configuration options
    - Log level management
  - Tab Refresh Pattern (CONTEXTUAL)
    - State management
    - Update mechanisms
    - Memory optimization
  - Signal/Slot Connections (CONTEXTUAL)
    - Connection management
    - Memory leak prevention
    - Thread safety
- 📄 File Processing & I/O
  - Defensive YAML Access (MANDATORY)
    - Error handling
    - Type validation
    - Default values
  - Buffered File Reading (CONTEXTUAL)
    - Memory efficiency
    - Performance optimization
    - Large file handling
  - Path Sanitization (MANDATORY)
    - Security considerations
    - Input validation
    - Path traversal prevention
- 🔍 Exception Handling & Logging
  - Dual Logger Pattern (MANDATORY)
    - Configuration setup
    - Log formatting
    - Output destinations
  - Loop Isolation (CONTEXTUAL)
    - Error containment
    - Recovery strategies
    - Performance impact
  - Parameterized Logging (MANDATORY)
    - Security benefits
    - Performance advantages
    - Debugging capabilities
- 🔒 Security Best Practices
  - Input Validation & Sanitization (MANDATORY)
    - Data type checking
    - Length validation
    - Content filtering
  - SQL Injection Prevention (MANDATORY)
    - Parameterized queries
    - Input escaping
    - ORM usage
  - Secrets Management (MANDATORY)
    - Environment variables
    - Secure storage
    - Access control
- 🗄️ DuckDB Data Processing
  - SQL-First Approach (CONTEXTUAL)
    - Query optimization
    - Performance benefits
    - Maintenance advantages
  - Parameterized Queries (MANDATORY)
    - Security benefits
    - Performance gains
    - Code reusability
  - Cursor Management (CONTEXTUAL)
    - Memory efficiency
    - Connection pooling
    - Error handling
  - Temporary Tables Strategy (CONTEXTUAL)
    - Use case analysis
    - Performance implications
    - Cleanup procedures
- 📊 DataFrame Operations
  - Memory-Efficient DataFrames (CONTEXTUAL)
    - Chunk processing
    - Data type optimization
    - Garbage collection
  - Vectorized Operations (CONTEXTUAL)
    - Performance benefits
    - Code simplicity
    - Memory usage
- 📝 Documentation & Comments
  - Module Docstring Template (MANDATORY)
    - Structure requirements
    - Content guidelines
    - Formatting standards
  - Class and Method Docstrings (CONTEXTUAL)
    - Parameter documentation
    - Return value description
    - Usage examples
  - Block Comments (CONTEXTUAL)
    - When to use
    - Content guidelines
    - Maintenance considerations
  - Inline Comments (ENHANCEMENT)
    - Appropriate usage
    - Code clarity
    - Maintenance impact
- 🧪 Testing & Validation - Comprehensive Guide
  - 🎯 Testing Philosophy for BIS
    - Quality assurance
    - Risk mitigation
    - Continuous improvement
  - 🏗️ Required Test Structure (MANDATORY)
    - Test organization
    - Naming conventions
    - Coverage requirements
  - 🗂️ Using engine/data Data for Testing
    - Data preparation
    - Test scenarios
    - Validation procedures
  - 🔬 Advanced Testing Patterns
    - Mock objects
    - Fixtures usage
    - Parameterized tests
  - 🧑‍💻 Software Tester Guidelines
    - Test case design
    - Bug reporting
    - Regression testing
- 📦 Import Management
  - Import Organization (CONTEXTUAL)
    - Grouping strategies
    - Order conventions
    - Readability standards
  - Type Hints (ENHANCEMENT)
    - Type annotation
    - IDE support
    - Documentation benefits
  - Avoiding Circular Imports (CONTEXTUAL)
    - Dependency analysis
    - Refactoring strategies
    - Import patterns
- ✅ Quick Validation Checklist
  - Architecture & Design ✅
    - Layer separation
    - Dependency management
    - Interface design
  - Code Structure ✅
    - Function organization
    - Variable naming
    - Code formatting
  - Logging & Error Handling ✅
    - Exception management
    - Log configuration
    - Error reporting
  - Security ✅
    - Input validation
    - Access control
    - Data protection
  - UI (if applicable) ✅
    - User experience
    - Performance
    - Accessibility
  - Data Processing ✅
    - Query optimization
    - Memory management
    - Error handling
  - Documentation ✅
    - Code comments
    - API documentation
    - User guides
  - Testing ✅
    - Unit test coverage
    - Integration testing
    - Performance testing
  - AI Agent Compliance ✅
    - Rule adherence
    - Quality standards
    - Best practice implementation
- 🛠️ Development Workflow
  - Setting Up Development Environment
    - Tool installation
    - Configuration setup
    - Testing environment
  - Pre-commit Validation
    - Code quality checks
    - Security scanning
    - Performance testing
  - AI Agent Enforcement Examples
    - Automated validation
    - Rule enforcement
    - Feedback generation
- 🎯 Practice Priority Matrix
  - Critical practices
  - Recommended practices
  - Optional enhancements
- 🔍 Troubleshooting Common Issues
  - Error identification
  - Resolution strategies
  - Prevention measures
- 🎯 Final Note for AI Agents
  - Usage guidelines
  - Best practices
  - Continuous improvement

## Business Analysis Best Practices
- 🎯 Agent Mission & Usage Guide
  - Purpose
    - Define scope and objectives
    - Establish success criteria
    - Identify key stakeholders
  - How AI Agents Should Use This Guide
    - Decision-making framework
    - Context-aware application
    - Priority assessment
  - Decision-Making Framework
    - Risk evaluation
    - Impact analysis
    - Resource considerations
- 🏗️ Core Principles & Business Framework
  - Business-First Architecture (MANDATORY)
    - Value-driven design
    - Stakeholder alignment
    - Business capability focus
  - Core BA Principles (MANDATORY)
    - Requirements traceability
    - Change management
    - Quality assurance
- ⚙️ AI Agent Adaptation Guide
  - 🎯 Agent Decision Framework
    - Context analysis
    - Rule evaluation
    - Action prioritization
  - 🔄 Documentation vs Enhancement Rules
    - When to document
    - When to enhance
    - Balance considerations
  - 🎨 Practice Categorization for Agents
    - Mandatory practices
    - Contextual practices
    - Enhancement practices
  - 📊 Enforcement Actions & Logging
    - Automated validation
    - Feedback generation
    - Compliance tracking
  - 🔧 Context-Aware Practice Selection
    - Project-specific adaptation
    - Team capability assessment
    - Business requirement alignment
- 🤖 AI-Powered Discovery & Extraction
  - Discovery Extraction Classes (MANDATORY)
    - Pattern recognition
    - Data classification
    - Insight generation
  - Prompt Engineering Templates (CONTEXTUAL)
    - Question formulation
    - Context setting
    - Response optimization
  - Multi-Step Analysis Workflows (ENHANCEMENT)
    - Process sequencing
    - Decision trees
    - Validation checkpoints
  - Validation & Refinement Patterns (CONTEXTUAL)
    - Accuracy verification
    - Bias detection
    - Result refinement
- 📊 Business Requirements Structure
  - Problem Statement Analysis (MANDATORY)
    - Issue identification
    - Impact assessment
    - Root cause analysis
  - Solution Definition Patterns (MANDATORY)
    - Alternative evaluation
    - Feasibility analysis
    - Recommendation development
  - Value Proposition Framework (CONTEXTUAL)
    - Benefit quantification
    - Cost analysis
    - ROI calculation
  - Metrics & KPI Definition (MANDATORY)
    - Performance indicators
    - Success measures
    - Monitoring frameworks
- 👥 Stakeholder Analysis & Management
  - Stakeholder Identification (MANDATORY)
    - Role mapping
    - Influence assessment
    - Interest evaluation
  - RACI Matrix Construction (CONTEXTUAL)
    - Responsibility assignment
    - Accountability definition
    - Communication planning
  - Influence Mapping (ENHANCEMENT)
    - Power analysis
    - Interest mapping
    - Engagement strategies
  - Communication Strategies (CONTEXTUAL)
    - Message development
    - Channel selection
    - Feedback mechanisms
- 🔍 Discovery Methods & Tools
  - Interview Techniques (CONTEXTUAL)
    - Question preparation
    - Active listening
    - Follow-up strategies
  - Process Mapping (ENHANCEMENT)
    - Workflow documentation
    - Bottleneck identification
    - Improvement opportunities
  - Risk Assessment Framework (MANDATORY)
    - Risk identification
    - Impact evaluation
    - Mitigation planning
  - Assumption Management (MANDATORY)
    - Assumption documentation
    - Validation methods
    - Contingency planning
- 📝 Structured Documentation Output
  - Document Templates (MANDATORY)
    - Standard formats
    - Content structure
    - Quality checklists
  - Markdown Best Practices (CONTEXTUAL)
    - Formatting standards
    - Readability guidelines
    - Maintenance tips
  - Diagram Guidelines (ENHANCEMENT)
    - Visualization types
    - Clarity standards
    - Tool selection
  - Version Control Patterns (CONTEXTUAL)
    - Change tracking
    - Collaboration workflows
    - Review processes
- 📈 Advanced Analytics & Enhancement
  - SRE-Inspired Error Budgets (ENHANCEMENT)
    - Error tolerance
    - Reliability metrics
    - Service level objectives
  - Business Intelligence Patterns (ENHANCEMENT)
    - Data visualization
    - Trend analysis
    - Predictive modeling
  - Predictive Analysis Framework (ENHANCEMENT)
    - Forecasting methods
    - Scenario planning
    - Risk modeling
  - Data Assessment Techniques (CONTEXTUAL)
    - Data quality evaluation
    - Completeness analysis
    - Accuracy verification
- ✅ Quick Validation Checklist
  - Business Requirements ✅
    - Completeness check
    - Clarity assessment
    - Feasibility evaluation
  - Stakeholder Analysis ✅
    - Coverage verification
    - Influence mapping
    - Communication planning
  - Documentation Quality ✅
    - Structure assessment
    - Clarity evaluation
    - Completeness check
  - Risk & Assumptions ✅
    - Identification completeness
    - Mitigation adequacy
    - Monitoring setup
  - AI Agent Compliance ✅
    - Rule adherence
    - Quality standards
    - Best practice implementation
- 🛠️ Development Workflow
  - BA Document Lifecycle
    - Creation phase
    - Review cycle
    - Approval process
  - Review & Approval Process
    - Stakeholder involvement
    - Quality gates
    - Sign-off procedures
  - AI Agent Enforcement Examples
    - Automated validation
    - Rule enforcement
    - Feedback generation
- 🎯 Practice Priority Matrix
  - Critical practices
  - Recommended practices
  - Optional enhancements
- 🔍 Troubleshooting Common Issues
  - Error identification
  - Resolution strategies
  - Prevention measures
- 🎯 Final Note for AI Agents
  - Usage guidelines
  - Best practices
  - Continuous improvement

## Architecture Best Practices
- 🎯 Agent Mission & Usage Guide
  - Purpose
    - Define scope and objectives
    - Establish success criteria
    - Identify key stakeholders
  - How AI Agents Should Use This Guide
    - Decision-making framework
    - Context-aware application
    - Priority assessment
  - Decision-Making Framework
    - Risk evaluation
    - Impact analysis
    - Resource considerations
- 🏗️ Business & Service Architecture
  - Service Model (Value Stream)
    - Process mapping
    - Value identification
    - Bottleneck analysis
  - Business Model (Customer Engagement)
    - Customer journey mapping
    - Touchpoint analysis
    - Experience optimization
- 🏗️ Solution Architecture
  - System (Context)
    - System boundaries
    - External interfaces
    - Integration points
  - Modules (Containers/Components)
    - Component design
    - Interface definition
    - Dependency management
  - Classes (Per-Module Class Relations)
    - Class hierarchy
    - Relationship mapping
    - Design patterns
  - Data Flow (End-to-End Processing)
    - Data pipeline design
    - Processing stages
    - Error handling
  - Data Model (Data Lake Structure and Entity Relationships)
    - Entity design
    - Relationship modeling
    - Data governance
  - UI Flow (GUI User Journey — Per File)
    - User experience design
    - Navigation patterns
    - Interaction flows
- 🏗️ People & Operations
  - Organizational (Roles and RACI)
    - Role definition
    - Responsibility assignment
    - Accountability matrix
  - Product Backlog (Roadmap Overview)
    - Feature prioritization
    - Timeline planning
    - Dependency management
  - Deployment (Release Process)
    - Release planning
    - Deployment automation
    - Rollback procedures
- 🏗️ Advanced Architectural Views
  - Configuration Management & Service Map
    - Configuration hierarchy
    - Service dependencies
    - Change management
  - Observability Map (ITIL Event Management)
    - Monitoring setup
    - Alert configuration
    - Incident response
- 📎 Cross-cutting Documentation Standards
  - Documentation templates
  - Quality standards
  - Maintenance procedures
- ✅ Acceptance for Completeness
  - Completeness criteria
  - Validation checklists
  - Quality gates
- 📦 Templates and Stubs
  - Code templates
  - Documentation stubs
  - Configuration examples
- 🎯 Quick Reference for AI Agents
  - Usage guidelines
  - Best practices
  - Decision frameworks



