# Research Entry Example
# This file demonstrates a complete research project definition
# Research follows a directed acyclic graph (DAG) for tech progression

[[research]]
id = "laser_weapons"
name = "Laser Weapon Technology"
description = "Unlock the secrets of directed energy weapons to gain a tactical advantage against alien forces."

# Research category and tier
category = "weapons"          # weapons, armor, craft, facility, alien_biology, psionics
tier = 2                      # 1=early, 2=mid, 3=late game
priority = "high"             # low, medium, high (AI research priority)

# Research costs
[research.cost]
research_hours = 96           # Total research hours required (scientists × 10 hours/day)
credits = 20000               # Upfront credit cost to start research
materials = [                 # Materials consumed when starting
    { item = "alien_power_cell", quantity = 5 },
    { item = "elerium", quantity = 2 }
]

# Prerequisites (must complete ALL to unlock)
[research.prerequisites]
research_required = [         # Research IDs that must be complete
    "alien_materials",
    "basic_physics"
]
items_required = [            # Items that must be in inventory
    { item = "alien_power_cell", quantity = 1 }
]
missions_completed = []       # Specific mission IDs (empty = none required)
story_flags = []              # Story progression flags required

# Research unlocks (what completing this research provides)
[research.unlocks]

# Items unlocked for manufacturing/purchase
items = [
    "laser_pistol",
    "laser_rifle",
    "laser_sniper"
]

# Facilities unlocked for construction
facilities = [
    "advanced_lab"
]

# New research projects unlocked
research = [
    "heavy_laser_weapons",
    "laser_cannon_craft"
]

# Craft equipment unlocked
craft_equipment = [
    "laser_defense_system"
]

# Story events triggered
story_events = [
    "scientist_breakthrough"
]

# Research information
[research.information]
lead_scientist = "Dr. Elena Martinez"
complexity = "high"           # low, medium, high, extreme
breakthrough_chance = 0.15    # 15% chance for early completion (1 week saved)
failure_risk = 0.0            # 0% chance of catastrophic failure

# In-game pedia entry
[research.pedia]
summary = "Laser weapons represent a significant leap in anti-alien technology."
full_text = """
Our analysis of alien power cells has revealed the possibility of creating 
stable directed energy weapons. Unlike conventional firearms, laser weapons 
offer several advantages:

1. **Armor Penetration**: Energy beams bypass traditional armor
2. **Unlimited Ammunition**: Powered by rechargeable cells
3. **Accuracy**: Light-speed projectiles eliminate bullet drop
4. **Environmental**: No chemical propellants or brass casings

However, these weapons require substantial power and sophisticated cooling 
systems. Manufacturing costs will be higher than conventional weapons, but 
the tactical advantages justify the investment.

Further research into heavy laser systems and vehicle-mounted variants 
should be prioritized once this technology is mastered.
"""

image_path = "assets/pedia/laser_weapons.png"  # 200×150 pixel art, scaled ×2
author_note = "Theoretical breakthrough achieved by Dr. Martinez's team."

# Research progress tracking
[research.progress]
daily_progress_base = 10      # Base progress per scientist per day
lab_efficiency_bonus = 0.1    # 10% bonus from advanced labs
scientist_specialization = [  # Bonus from specialized scientists
    { specialization = "physics", bonus = 0.15 },
    { specialization = "engineering", bonus = 0.10 }
]

# Research branches (affects AI strategic decisions)
[research.branches]
branch_type = "combat"        # combat, defense, support, economy
strategic_value = 85          # 0-100, how valuable AI considers this
tactical_impact = "high"      # low, medium, high, game_changing

# Time-gated mechanics
[research.time_gates]
min_game_month = 3            # Cannot research before month 3
max_game_month = 0            # 0 = no limit
expires_month = 0             # 0 = never expires (stays available)

# Deterministic RNG scope
[research.rng]
scope_prefix = "research:laser_weapons"
# Used for: "research:laser_weapons:breakthrough", "research:laser_weapons:complications"

# Balance metadata
[research.balance]
completion_expected_day = 45  # Expected completion on campaign day 45
player_power_jump = 15        # Estimated % increase in player power
difficulty_adjustment = 0.1   # AI should increase difficulty by 10%

# Modding support
[research.modding]
mod_id = "base_game"
author = "AlienFall Team"
version = "1.0.0"
dependencies = []
override_priority = 100       # Higher = overrides lower priority definitions

# Optional: Multiple research paths (branching tech tree)
[[research.alternative_paths]]
path_name = "Energy Efficiency Focus"
description = "Prioritize battery life over damage output"
bonus_unlocks = ["extended_battery_pack"]
penalty = { research_hours = 120 }  # Takes longer

[[research.alternative_paths]]
path_name = "Damage Maximization Focus"
description = "Prioritize raw power over efficiency"
bonus_unlocks = ["overcharged_laser_rifle"]
penalty = { credits = 30000 }  # Costs more

# Research complications (random events during research)
[[research.complications]]
event_id = "containment_breach"
description = "Power cell overload damages lab equipment"
chance = 0.05                 # 5% chance per week
effect = { research_hours = 24 }  # Adds 24 hours to completion
severity = "minor"

[[research.complications]]
event_id = "breakthrough_insight"
description = "Dr. Martinez discovers an optimization"
chance = 0.10                 # 10% chance per week
effect = { research_hours = -24 }  # Reduces by 24 hours
severity = "beneficial"

# Tags for filtering and search
[research.metadata]
tags = ["weapons", "energy", "directed_energy", "mid_game", "combat"]
searchable_keywords = ["laser", "beam", "energy weapon", "plasma alternative"]
difficulty_recommendation = "veteran"  # rookie, veteran, commander, impossible
